{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\OneDrive\\\\M\\xE1y t\\xEDnh\\\\React JS\\\\POS\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport Carousel from 'react-elastic-carousel'; // import styles from './App.css'\n\nimport Item from './comps/Item';\nimport { isValidTimestamp } from '@firebase/util';\nimport MenuSection from './screens/MenuSection';\nimport { db } from './firebase/config';\nimport { useEffect, useState } from 'react';\nimport { collection, getDoc, getDocs } from '@firebase/firestore';\nimport { data } from './comps/Data';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [menus, setMenus] = useState([]);\n  const [refreshDataCount, setRefreshDataCount] = useState(0);\n  const menusRef = collection(db, 'menus');\n  useEffect(() => {\n    const getMenus = async () => {\n      const data = await getDocs(menusRef);\n      data.docs.forEach(menu => {\n        const getDishes = async () => {\n          var dishesRef = collection(db, 'menus' + '/' + menu.id + '/' + 'dishes');\n          const dishes = await getDocs(dishesRef);\n          console.log('Adding at menu id', menu.id);\n          const dishesList = dishes.docs.map(dish => ({ ...dish.data(),\n            id: dish.id\n          }));\n          setMenus(prevList => [...prevList, { ...menu.data(),\n            id: menu.id,\n            dishes: dishesList\n          }]);\n        };\n\n        getDishes();\n      }); // setRefreshDataCount((prevCount) => prevCount + 1)\n    };\n\n    getMenus();\n    console.log('App call', refreshDataCount); // getMenus().then(\n    //   () => {\n    //     console.log('In App:', menus);\n    //   }\n    // ).catch(\n    //   (e) => console.log('Error in loading data:', e)\n    // );      \n  }, []);\n  const unsub = onSnapshot(doc(db, \"cities\", \"SF\"), doc => {\n    console.log(\"Current data: \", doc.data());\n  });\n  return (\n    /*#__PURE__*/\n    // Learn Listen for change\n    _jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }, this) // App run\n    // <MenuSection \n    //   menusList={menus}\n    //   count={refreshDataCount}\n    //   setCount={setRefreshDataCount}\n    // />\n    // <div>\n    //   {\n    //   menusList.map(\n    //     menu => {\n    //       console.log(menusList);\n    //       console.log('The menu with id', menu.id, ':', menu);\n    //       return (\n    //           <div>\n    //           <text> {menu.id}: {menu.name} </text>\n    //           {\n    //             menu.dishes.map(\n    //               dish => (<h1> {dish.id}: {dish.name}, {dish.price} </h1>)\n    //             )\n    //           }\n    //         </div>\n    //       )\n    //     }\n    //   )}\n    // </div>\n\n  );\n}\n\n_s(App, \"1p+cmFpwEHVmjwAhUGE/mHtpgU0=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/Admin/OneDrive/Máy tính/React JS/POS/src/App.js"],"names":["Carousel","Item","isValidTimestamp","MenuSection","db","useEffect","useState","collection","getDoc","getDocs","data","App","menus","setMenus","refreshDataCount","setRefreshDataCount","menusRef","getMenus","docs","forEach","menu","getDishes","dishesRef","id","dishes","console","log","dishesList","map","dish","prevList","unsub","onSnapshot","doc"],"mappings":";;;;AACA,OAAO,WAAP;AACA,OAAOA,QAAP,MAAqB,wBAArB,C,CACA;;AACA,OAAOC,IAAP,MAAiB,cAAjB;AACA,SAASC,gBAAT,QAAiC,gBAAjC;AACA,OAAOC,WAAP,MAAwB,uBAAxB;AACA,SAASC,EAAT,QAAmB,mBAAnB;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,UAAT,EAAqBC,MAArB,EAA6BC,OAA7B,QAA4C,qBAA5C;AACA,SAAQC,IAAR,QAAmB,cAAnB;;;AAEA,SAASC,GAAT,GAAe;AAAA;;AACb,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACQ,gBAAD,EAAmBC,mBAAnB,IAA0CT,QAAQ,CAAC,CAAD,CAAxD;AAEA,QAAMU,QAAQ,GAAGT,UAAU,CAACH,EAAD,EAAK,OAAL,CAA3B;AAEAC,EAAAA,SAAS,CACP,MAAM;AACJ,UAAMY,QAAQ,GAAG,YAAY;AAC3B,YAAMP,IAAI,GAAG,MAAMD,OAAO,CAACO,QAAD,CAA1B;AAEEN,MAAAA,IAAI,CAACQ,IAAL,CAAUC,OAAV,CACEC,IAAI,IAAI;AAEN,cAAMC,SAAS,GAAG,YAAY;AAC5B,cAAIC,SAAS,GAAGf,UAAU,CAACH,EAAD,EAAK,UAAU,GAAV,GAAgBgB,IAAI,CAACG,EAArB,GAA0B,GAA1B,GAAgC,QAArC,CAA1B;AACA,gBAAMC,MAAM,GAAG,MAAMf,OAAO,CAACa,SAAD,CAA5B;AAEAG,UAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCN,IAAI,CAACG,EAAtC;AACA,gBAAMI,UAAU,GAAGH,MAAM,CAACN,IAAP,CAAYU,GAAZ,CAAiBC,IAAI,KAAK,EAAC,GAAGA,IAAI,CAACnB,IAAL,EAAJ;AAAiBa,YAAAA,EAAE,EAAEM,IAAI,CAACN;AAA1B,WAAL,CAArB,CAAnB;AAEAV,UAAAA,QAAQ,CACLiB,QAAD,IAAe,CAAC,GAAGA,QAAJ,EAAc,EAAC,GAAGV,IAAI,CAACV,IAAL,EAAJ;AAAiBa,YAAAA,EAAE,EAAEH,IAAI,CAACG,EAA1B;AAA8BC,YAAAA,MAAM,EAAEG;AAAtC,WAAd,CADT,CAAR;AAGD,SAVD;;AAYAN,QAAAA,SAAS;AACV,OAhBH,EAHyB,CAsBzB;AACH,KAvBD;;AAyBAJ,IAAAA,QAAQ;AACRQ,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBZ,gBAAxB,EA3BI,CA6BJ;AACA;AACA;AACA;AACA;AACA;AACA;AACD,GArCM,EAsCP,EAtCO,CAAT;AAwCA,QAAMiB,KAAK,GAAGC,UAAU,CAACC,GAAG,CAAC7B,EAAD,EAAK,QAAL,EAAe,IAAf,CAAJ,EAA2B6B,GAAD,IAAS;AACzDR,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BO,GAAG,CAACvB,IAAJ,EAA9B;AACH,GAFyB,CAAxB;AAIA;AAAA;AACE;AACA;AAAA;AAAA;AAAA;AAAA,YAFF,CAME;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAjCF;AAmCD;;GArFQC,G;;KAAAA,G;AAuFT,eAAeA,GAAf","sourcesContent":["import logo from './logo.svg';\nimport './App.css';\nimport Carousel from 'react-elastic-carousel';\n// import styles from './App.css'\nimport Item from './comps/Item';\nimport { isValidTimestamp } from '@firebase/util';\nimport MenuSection from './screens/MenuSection';\nimport { db } from './firebase/config';\nimport { useEffect, useState } from 'react';\nimport { collection, getDoc, getDocs } from '@firebase/firestore';\nimport {data} from './comps/Data';\n\nfunction App() {\n  const [menus, setMenus] = useState([]);\n  const [refreshDataCount, setRefreshDataCount] = useState(0);\n\n  const menusRef = collection(db, 'menus');\n\n  useEffect(\n    () => {\n      const getMenus = async () => {\n        const data = await getDocs(menusRef);\n\n          data.docs.forEach(\n            menu => {\n\n              const getDishes = async () => {\n                var dishesRef = collection(db, 'menus' + '/' + menu.id + '/' + 'dishes');\n                const dishes = await getDocs(dishesRef);\n\n                console.log('Adding at menu id', menu.id);\n                const dishesList = dishes.docs.map( dish => ({...dish.data(), id: dish.id}));\n\n                setMenus(\n                  (prevList) => ([...prevList, {...menu.data(), id: menu.id, dishes: dishesList}])\n                )\n              }\n\n              getDishes();\n            }\n          )\n\n          // setRefreshDataCount((prevCount) => prevCount + 1)\n      }\n\n      getMenus();\n      console.log('App call', refreshDataCount);\n\n      // getMenus().then(\n      //   () => {\n      //     console.log('In App:', menus);\n      //   }\n      // ).catch(\n      //   (e) => console.log('Error in loading data:', e)\n      // );      \n    }\n  , [])\n\n  const unsub = onSnapshot(doc(db, \"cities\", \"SF\"), (doc) => {\n    console.log(\"Current data: \", doc.data());\n});\n\n  return (\n    // Learn Listen for change\n    <div>\n\n    </div>\n\n    // App run\n    // <MenuSection \n    //   menusList={menus}\n    //   count={refreshDataCount}\n    //   setCount={setRefreshDataCount}\n    // />\n\n    // <div>\n    //   {\n        \n    //   menusList.map(\n    //     menu => {\n    //       console.log(menusList);\n    //       console.log('The menu with id', menu.id, ':', menu);\n\n    //       return (\n    //           <div>\n    //           <text> {menu.id}: {menu.name} </text>\n    //           {\n    //             menu.dishes.map(\n    //               dish => (<h1> {dish.id}: {dish.name}, {dish.price} </h1>)\n    //             )\n    //           }\n    //         </div>\n    //       )\n    //     }\n    //   )}\n    // </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}