{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\OneDrive\\\\M\\xE1y t\\xEDnh\\\\React JS\\\\POS\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport Carousel from 'react-elastic-carousel'; // import styles from './App.css'\n\nimport Item from './comps/Item';\nimport { isValidTimestamp } from '@firebase/util';\nimport MenuSection from './screens/MenuSection';\nimport { db } from './firebase/config';\nimport { useEffect, useState } from 'react';\nimport { collection, getDoc, getDocs } from '@firebase/firestore';\nimport { data } from './comps/Data';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [menus, setMenus] = useState([]);\n  const [selectedMenuId, setSelectedMenuId] = useState('1');\n  const [refreshCount, setRefreshCount] = useState(0);\n\n  const handle = () => {\n    setSelectedMenuId(data().at(0).id);\n  };\n\n  useEffect(() => {\n    const getMenus = async () => {\n      const menusRef = collection(db, 'menu');\n      const data = await getDocs(menusRef);\n      setMenus(data.docs.map(item => ({ ...item.data(),\n        id: item.id\n      })));\n    };\n\n    const listMenu = data();\n    setMenus(listMenu); // setSelectedMenuId(listMenu.at(0).id);\n\n    handle(); // console.log(\"The first menu appear at id:\", selectedMenuId);\n  }, []);\n  const menusRef = collection(db, 'menus');\n  const [menusList, setMenusList] = useState([]);\n  const [dishes, setDishes] = useState([]);\n  useEffect(() => {\n    const getDishes = async menuId => {\n      var dishesRef = collection(db, 'menus' + '/' + menuId + '/' + 'dishes');\n      const dishes = await getDocs(dishesRef);\n      const data = dishes.docs.map(dish => ({ ...dish.data(),\n        id: dish.id\n      }));\n      console.log('Data: ', data);\n      return {};\n    };\n\n    const getMenus = async () => {\n      const data = await getDocs(menusRef);\n      setMenusList(data.docs.map(menu => ({ ...menu.data(),\n        id: menu.id,\n        dishes: getDishes(menu.id)\n      })));\n    }; // data.docs.forEach(\n    //   menu => {\n    //     // setMenusList([...menusList, {...menu.data(), id: menu.id}]);\n    //     // console.log('Reference', menu.ref);\n    //     // console.log('X', menu.get('dishes'));\n    //     const getDishes = async () => {\n    //       var dishesRef = collection(db, 'menus' + '/' + menu.id + '/' + 'dishes');\n    //       const dishes = await getDocs(dishesRef);\n    //       console.log('Adding at menu id', menu.id);\n    //       setMenusList([...menusList, {...menu.data(), id: menu.id, dishes: dishes.docs.map(\n    //           dish => ({...dish.data(), id: dish.id}))}\n    //     ])\n    // console.log('The menu with id', menu.id, 'contains dishes:');\n    // dishes.docs.forEach(\n    //   dish => {\n    //     console.log({...dish.data(), id: dish.id});\n    //   }\n    // )\n    // getDishes();\n\n\n    getMenus();\n    console.log('The menus contains:', menusList); // getMenus();\n    // const getDishes = async () => {\n    //   const path = 'menus' + '/' + menu.id + '/' + 'dishes';\n    //   const dishesRef = collection(db, path);\n    //   const dishes = await getDocs(dishesRef);\n    //   setDishes( dishes.docs.map( dish => ({...dish.data(), id: dish.id})));\n    // }\n    // getDishes();\n  }, []);\n  return (\n    /*#__PURE__*/\n    // <MenuSection \n    //   menus={menus}\n    //   selectedMenuId={selectedMenuId}\n    //   setSelectedMenuId={setSelectedMenuId}\n    // />\n    _jsxDEV(\"div\", {\n      children: menusList.map(menu => {\n        console.log(menusList);\n        console.log('Menu: id', menu.id, ',name:', menu.name); // menu.dishes.map(\n        //   dish => console.log(dish)\n        // )\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 5\n    }, this)\n  );\n}\n\n_s(App, \"GzNjxteJKoZYVqc0FL1L//sRp7s=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/Admin/OneDrive/Máy tính/React JS/POS/src/App.js"],"names":["Carousel","Item","isValidTimestamp","MenuSection","db","useEffect","useState","collection","getDoc","getDocs","data","App","menus","setMenus","selectedMenuId","setSelectedMenuId","refreshCount","setRefreshCount","handle","at","id","getMenus","menusRef","docs","map","item","listMenu","menusList","setMenusList","dishes","setDishes","getDishes","menuId","dishesRef","dish","console","log","menu","name"],"mappings":"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","sourcesContent":["import logo from './logo.svg';\nimport './App.css';\nimport Carousel from 'react-elastic-carousel';\n// import styles from './App.css'\nimport Item from './comps/Item';\nimport { isValidTimestamp } from '@firebase/util';\nimport MenuSection from './screens/MenuSection';\nimport { db } from './firebase/config';\nimport { useEffect, useState } from 'react';\nimport { collection, getDoc, getDocs } from '@firebase/firestore';\nimport {data} from './comps/Data';\n\nfunction App() {\n  const [menus, setMenus] = useState([]);\n  const [selectedMenuId, setSelectedMenuId] = useState('1');\n  const [refreshCount, setRefreshCount] = useState(0);\n\n  const handle = () => {\n    setSelectedMenuId(data().at(0).id);\n  }\n\n  useEffect(\n    () => {\n      const getMenus = async () => {\n        const menusRef = collection(db, 'menu');\n        const data = await getDocs(menusRef);\n    \n        setMenus(data.docs.map(\n          item => ({...item.data(), id: item.id})\n        ))\n      }\n\n\n      const listMenu = data();\n      setMenus(listMenu);\n      // setSelectedMenuId(listMenu.at(0).id);\n      handle();\n      // console.log(\"The first menu appear at id:\", selectedMenuId);\n    }\n  , [])\n\n  const menusRef = collection(db, 'menus');\n  const [menusList, setMenusList] = useState([]);\n  const [dishes, setDishes] = useState([]);\n\n  useEffect(\n    () => {\n      const getDishes = async (menuId) => {\n        var dishesRef = collection(db, 'menus' + '/' + menuId + '/' + 'dishes');\n        const dishes = await getDocs(dishesRef);\n        const data = dishes.docs.map( dish => ({...dish.data(), id: dish.id}));\n        console.log('Data: ', data);\n        return {\n          \n        }\n      }\n\n      const getMenus = async () => {\n        const data = await getDocs(menusRef);\n\n        setMenusList(\n          data.docs.map(\n            menu => ({...menu.data(), id: menu.id, dishes: getDishes(menu.id)})\n          )\n        )\n      }\n\n        // data.docs.forEach(\n        //   menu => {\n        //     // setMenusList([...menusList, {...menu.data(), id: menu.id}]);\n        //     // console.log('Reference', menu.ref);\n        //     // console.log('X', menu.get('dishes'));\n\n        //     const getDishes = async () => {\n        //       var dishesRef = collection(db, 'menus' + '/' + menu.id + '/' + 'dishes');\n        //       const dishes = await getDocs(dishesRef);\n\n        //       console.log('Adding at menu id', menu.id);\n\n        //       setMenusList([...menusList, {...menu.data(), id: menu.id, dishes: dishes.docs.map(\n        //           dish => ({...dish.data(), id: dish.id}))}\n        //     ])\n              \n              // console.log('The menu with id', menu.id, 'contains dishes:');\n\n              // dishes.docs.forEach(\n              //   dish => {\n              //     console.log({...dish.data(), id: dish.id});\n              //   }\n              // )\n            \n            // getDishes();\n          \n        \n      \n\n      getMenus();\n      console.log('The menus contains:', menusList);\n\n      // getMenus();\n\n      // const getDishes = async () => {\n      //   const path = 'menus' + '/' + menu.id + '/' + 'dishes';\n      //   const dishesRef = collection(db, path);\n      //   const dishes = await getDocs(dishesRef);\n        \n      //   setDishes( dishes.docs.map( dish => ({...dish.data(), id: dish.id})));\n      // }\n\n      // getDishes();\n    }\n  , [])\n\n  return (\n    // <MenuSection \n    //   menus={menus}\n    //   selectedMenuId={selectedMenuId}\n    //   setSelectedMenuId={setSelectedMenuId}\n    \n    // />\n\n    <div>\n      {\n      menusList.map(\n        menu => {\n            console.log(menusList);\n            console.log('Menu: id', menu.id, ',name:', menu.name);\n            // menu.dishes.map(\n            //   dish => console.log(dish)\n            // )\n        }\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}